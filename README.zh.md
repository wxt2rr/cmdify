# Cmdify - AI å‘½ä»¤åŠ©æ‰‹

ç”¨è‡ªç„¶è¯­è¨€ç”Ÿæˆ Shell å‘½ä»¤çš„ CLI å·¥å…·ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ¤– **AI é©±åŠ¨**ï¼šé€šè¿‡è‡ªç„¶è¯­è¨€æè¿°ï¼Œè‡ªåŠ¨ç”Ÿæˆå¯¹åº”çš„ Shell å‘½ä»¤
- ğŸ”’ **å®‰å…¨æ£€æŸ¥**ï¼šè‡ªåŠ¨æ£€æµ‹å±é™©å‘½ä»¤ï¼ˆå¦‚ `rm -rf`ï¼‰ï¼Œéœ€è¦äºŒæ¬¡ç¡®è®¤
- ğŸ“‹ **å¤šé€‰é¡¹æ¨è**ï¼šè¿”å› 1-3 ä¸ªå€™é€‰å‘½ä»¤ä¾›é€‰æ‹©
- âš¡ **å¤šç§ä½¿ç”¨æ¨¡å¼**ï¼šæ”¯æŒäº¤äº’æ¨¡å¼ã€ä¸€é”®æ¨¡å¼ã€ä»…ç”Ÿæˆæ¨¡å¼
- âš™ï¸ **çµæ´»é…ç½®**ï¼šæ”¯æŒé…ç½®æ–‡ä»¶å’Œç¯å¢ƒå˜é‡
- ğŸ“œ **å‘½ä»¤å†å²**ï¼šæŸ¥çœ‹ã€æœç´¢å’Œåˆ†é¡µæµè§ˆå‘½ä»¤å†å²è®°å½•

## å®‰è£…

### æ–¹æ³•ä¸€ï¼šå…¨å±€å®‰è£…ï¼ˆæ¨èï¼‰

```bash
cd /path/to/cmdify
npm install -g .
```

### æ–¹æ³•äºŒï¼šä» npm å®‰è£…

```bash
npm install -g cmdify
```

### æ–¹æ³•ä¸‰ï¼šä½¿ç”¨ npm linkï¼ˆå¼€å‘æ—¶æ–¹ä¾¿ï¼‰

```bash
cd /path/to/cmdify
npm link

# ä½¿ç”¨æ—¶ç›´æ¥è¿è¡Œ
cmdify
```

### æ–¹æ³•å››ï¼šç›´æ¥è¿è¡Œï¼ˆæœ¬åœ°å¼€å‘ï¼‰

```bash
cd /path/to/cmdify

# è¿è¡Œ
npm run dev

# æˆ–è€…
npm run build
node dist/index.js
```

### éªŒè¯å®‰è£…

```bash
# æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸ
which cmdify

# æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
cmdify --help
```

## é…ç½®

### æ–¹æ³•ä¸€ï¼šç¯å¢ƒå˜é‡ï¼ˆæ¨èï¼‰

```bash
# ä¸´æ—¶è®¾ç½®
export OPENAI_API_KEY=your_api_key_here

# æ°¸ä¹…ä¿å­˜åˆ° ~/.zshrcï¼ˆzshï¼‰æˆ– ~/.bashrcï¼ˆbashï¼‰
echo 'export OPENAI_API_KEY=your_api_key_here' >> ~/.zshrc
source ~/.zshrc
```

### æ–¹æ³•äºŒï¼šé…ç½®æ–‡ä»¶

åœ¨ `~/.cmdify/config.json` ä¸­é…ç½®ï¼š

```bash
mkdir -p ~/.cmdify
cat > ~/.cmdify/config.json << 'EOF'
{
  "llm": {
    "provider": "openai",
",
    "model": "gpt-4o-mini",
    "apiKey": "your_api_key_here",
    "baseUrl": "https://api.openai.com/v1"
  },
  "safety": {
    "confirmDangerous": true,
    "dangerousPatterns": [
      "rm -rf",
      "rm -r /",
      "dd if=",
      "mkfs",
      "format"
    ]
  }
}
EOF
```

## ä½¿ç”¨æ–¹æ³•

### äº¤äº’æ¨¡å¼

ç›´æ¥è¿è¡Œ `cmdify` è¿›å…¥äº¤äº’æ¨¡å¼ï¼š

```bash
$ cmdify

ğŸ¤– Cmdify - AI å‘½ä»¤åŠ©æ‰‹
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

è¯·è¾“å…¥ä½ æƒ³æ‰§è¡Œçš„æ“ä½œ (Ctrl+C é€€å‡º): æŸ¥çœ‹å ç”¨ 8080 ç«¯å£çš„è¿›ç¨‹

â³ æ­£åœ¨ç”Ÿæˆå‘½ä»¤...

ğŸ“‹ ç”Ÿæˆçš„å‘½ä»¤:

[1] lsof -i :8080    â­ æ¨è
    æŸ¥çœ‹æŒ‡å®šç«¯å£å ç”¨æƒ…å†µ

[2] netstat -tulnp | grep 8080
    ä½¿ç”¨ netstat æŸ¥çœ‹ç«¯å£

[3] ss -tululnp | grep 8080
    ä½¿ç”¨ ss å‘½ä»¤æŸ¥çœ‹ç«¯å£

è¯·é€‰æ‹© [1-3, c=å¤åˆ¶, r=é‡æ–°ç”Ÿæˆ, q=é€€å‡º]: 1

âœ… æ‰§è¡Œ: lsof -i :8080

COMMAND   PID   USER   FD   TYPE DEVICE SIZE/OFF NODE NAME
node    12345  user   24u  IPv4  ...    0t0  TCP *:8080
```

### ä¸€é”®æ¨¡å¼

è‡ªåŠ¨æ‰§è¡Œæ¨èçš„å‘½ä»¤ï¼ˆç¬¬ä¸€ä¸ªï¼‰ï¼š

```bash
$ cmdify -y å¯åŠ¨æ‰€æœ‰ docker å®¹å™¨

â³ æ­£åœ¨ç”Ÿæˆå‘½ä»¤...

âœ… æ‰§è¡Œ: docker start $(docker ps -a -q)
```

### ä»…ç”Ÿæˆæ¨¡å¼

åªç”Ÿæˆå‘½ä»¤ï¼Œä¸æ‰§è¡Œï¼š

```bash
$ cmdify -n æŸ¥çœ‹ç³»ç»Ÿå†…å­˜ä½¿ç”¨æƒ…å†µ

â³ æ­£åœ¨ç”Ÿæˆå‘½ä»¤...

ğŸ“‹ ç”Ÿæˆçš„å‘½ä»¤:

[1] free -h
    æŸ¥çœ‹ç³»ç»Ÿå†…å­˜ä½¿ç”¨æƒ…å†µ    â­ æ¨è

[2] vmstat -s
    ä½¿ç”¨ vmstat æŸ¥çœ‹å†…å­˜ç»Ÿè®¡
```

## å‘½ä»¤é€‰é¡¹

| é€‰é¡¹ | è¯´æ˜ |
|------|------|
| `-y, --yes` | è‡ªåŠ¨æ‰§è¡Œæ¨èå‘½ä»¤ï¼Œæ— éœ€ç¡®è®¤ |
| `-n, --no-exec` | åªç”Ÿæˆå‘½ä»¤ï¼Œä¸æ‰§è¡Œ |
| `-c, --copy` | å¤åˆ¶å‘½ä»¤åˆ°å‰ªè´´æ¿ |
| `-p, --provider <name>` | LLM æä¾›å•† (é»˜è®¤: openai) |
| `-m, --model <name>` | æŒ‡å®šæ¨¡å‹ |
| `-h, --help` | æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ |
| `-V, --version` | æ˜¾ç¤ºç‰ˆæœ¬å· |

## å†å²è®°å½•

### æŸ¥çœ‹å†å²

```bash
$ cmdify history
# æˆ–ä½¿ç”¨åˆ«å
$ cf his
```

### æœç´¢å†å²

```bash
$ cmdify history -s keyword
# æˆ–
$ cf his -s keyword
```

### æ‰“å¼€å†å²æ–‡ä»¶

```bash
$ cmdify history -o
# æˆ–
$ cf his -o
```

### å†å²å¯¼èˆª

ä½¿ç”¨é”®ç›˜å¯¼èˆªå†å²è®°å½•ï¼š

- `â†‘/â†“` æˆ– `k/j` - ä¸Šä¸‹é€‰æ‹©æ¡ç›®
- `â†/â†’` æˆ– `h/l` æˆ– `n/p` - ç¿»é¡µ
- `Enter` - æ‰§è¡Œé€‰ä¸­çš„å‘½ä»¤ï¼ˆäºŒæ¬¡ç¡®è®¤ï¼‰
- `q` æˆ– `ESC` - é€€å‡º

é€‰ä¸­çš„æ¡ç›®ä¼šæ˜¾ç¤º `â†’` ç®­å¤´æ ‡è®°ã€‚

å†å²è®°å½•ä¿å­˜åœ¨ `~/.cmdify/history.txt`

## ä½¿ç”¨ç¤ºä¾‹

### æŸ¥è¯¢ç«¯å£å ç”¨

```bash
$ cmdify æŸ¥çœ‹å ç”¨ 8080 ç«¯å£çš„è¿›ç¨‹
```

### Docker æ“ä½œ

```bash
$ cmdify å¯åŠ¨æ‰€æœ‰åœæ­¢çš„ docker å®¹å™¨
$ cmdify æŸ¥çœ‹æ‰€æœ‰ docker é•œåƒ
$ cmdify åœæ­¢æ‰€æœ‰ docker å®¹å™¨
```

### ç³»ç»Ÿç›‘æ§

```bash
$ cmdify æŸ¥çœ‹ç³»ç»Ÿ CPU ä½¿ç”¨æƒ…å†µ
$ cmdify æŸ¥çœ‹ç³»ç»Ÿå†…å­˜ä½¿ç”¨æƒ…å†µ
$ cmdify æŸ¥çœ‹ç£ç›˜ä½¿ç”¨æƒ…å†µ
```

### è¿›ç¨‹ç®¡ç†

```bash
$ cmdify æŸ¥çœ‹ node ç›¸å…³çš„è¿›ç¨‹
$ cmdify æ€æ‰å ç”¨ 8080 ç«¯å£çš„è¿›ç¨‹
```

### ç½‘ç»œæ“ä½œ

```bash
$ cmdify æµ‹è¯• google.com çš„è¿æ¥
$ cmdify æŸ¥çœ‹æœ¬æœº IP åœ°å€
$ cmdify æŸ¥çœ‹æ‰€æœ‰ç›‘å¬çš„ç«¯å£
```

## å¼€å‘

### è¿è¡Œå¼€å‘æ¨¡å¼

```bash
npm run dev
```

### æ„å»º

```bash
npm run build
```

### è¿è¡Œæµ‹è¯•

```bash
npm test
```

## é¡¹ç›®ç»“æ„

```
cmdify/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ cli/              # CLI å‘½ä»¤å¤„ç†
â”‚   â”‚   â”œâ”€â”€ index.ts      # CLI å…¥å£
â”‚   â”‚   â”œâ”€â”€ interactive.ts # äº¤äº’æ¨¡å¼
â”‚   â”‚   â”œâ”€â”€ history.ts    # å†å²å‘½ä»¤
â”‚   â”‚   â””â”€â”€ oneshot.ts    # ä¸€é”®æ¨¡å¼
â”‚   â”œâ”€â”€ services/          # ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ llm/          # LLM æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ command/       # å‘½ä»¤å¤„ç†
â”‚   â”‚   â””â”€â”€ config/       # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ ui/               # UI æ˜¾ç¤º
â”‚   â””â”€â”€ types/            # TypeScript ç±»å‹
â”œâ”€â”€ bin/
â”‚   â””â”€â”€ cmdify             # å¯æ‰§è¡Œæ–‡ä»¶
â”œâ”€â”€ prompts/
â”‚   â””â”€â”€ system.txt        # LLM ç³»ç»Ÿæç¤ºè¯
â””â”€â”€ package.json
```

## æŠ€æœ¯æ ˆ

- **Node.js + TypeScript** - è¿è¡Œæ—¶å’Œç±»å‹ç³»ç»Ÿ
- **commander** - CLI æ¡†æ¶
- **openai** - OpenAI API SDK
- **chalk** - ç»ˆç«¯å½©è‰²è¾“å‡º
- **execa** - å‘½ä»¤æ‰§è¡Œ
- **cosmiconfig** - é…ç½®æ–‡ä»¶ç®¡ç†

## License

MIT

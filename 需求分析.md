# CLI 命令助手 - 需求分析

## 1. 项目背景

在日常开发和运维工作中，用户经常需要执行各种命令行操作，例如：
- 启动/停止 Docker 容器
- 查询端口占用情况
- 查看进程信息
- 系统监控和诊断

由于命令种类繁多且参数复杂，用户往往忘记具体的命令拼写和参数用法，需要：
1. 切换到浏览器
2. 搜索相关命令
3. 复制命令到终端
4. 执行命令

这个过程效率低下，打断工作流。

## 2. 用户画像

- **主要用户**：开发者、系统管理员、运维工程师
- **技术能力**：熟悉基本命令行操作，但不需要记住所有命令细节
- **痛点**：
  - 命令参数复杂，容易忘记
  - 不常用命令需要频繁查阅文档
  - 多个命令组合使用时难以记忆
  - 跨平台命令差异（如 Linux vs macOS）

## 3. 核心需求

### 3.1 功能需求

| 需求编号 | 需求描述 | 优先级 |
|---------|---------|-------|
| FR-001 | 支持自然语言输入描述想要执行的操作 | P0 |
| FR-002 | 调用 LLM API 理解语义并返回对应命令 | P0 |
| FR-003 | 支持返回多个候选命令方案 | P0 |
| FR-004 | 命令按序号排列，用户可选择执行 | P0 |
| FR-005 | 显示命令执行前的预览信息 | P1 |
| FR-006 | 支持命令执行历史记录 | P1 |
| FR-007 | 支持配置不同的 LLM API 提供商 | P1 |
| FR-008 | 检测当前操作系统，返回对应的命令 | P1 |

### 3.2 非功能需求

| 需求编号描述 | 需求描述 |
|-------------|---------|
| NFR-001 | 响应时间：命令生成应在 3 秒内完成 |
| NFR-002 | 安全性：危险命令（如 rm -rf）需要二次确认 |
| NFR-003 | 可用性：提供清晰的使用帮助和错误提示 |
| NFR-004 | 可配置性：支持通过配置文件设置 API key 等参数 |
| NFR-005 | 兼容性：支持主流 Linux 发行版和 macOS |

## 4. 用户使用场景

### 场景 1：查询端口占用
```
用户输入: 查看占用 8080 端口的进程
系统返回:
  [1] lsof -i :8080
  [2] netstat -tulnp | grep 8080
  [3] ss -tulnp | grep 8080
用户输入: 1
系统执行: lsof -i :8080
```

### 场景 2：Docker 操作
```
用户输入: 启动所有停止的 docker 容器
系统返回:
  [1] docker start $(docker ps -a -q)
  [2] docker-compose up -d
用户输入: 1
系统执行: docker start $(docker ps -a -q)
```

### 场景 3：系统监控
```
用户输入: 查看系统内存和CPU使用情况
系统返回:
  [1] top
  [2] htop
  [3] vmstat
用户输入: 2
系统执行: htop
```

## 5. 功能边界

### 包含
- 通过自然语言生成 Shell 命令
- 支持多个候选命令选择
- 命令历史记录
- 基本配置管理

### 不包含
- 命令执行后的结果分析
- 复杂的多命令流水线编排
- 图形界面
- 云端命令存储

## 6. 约束条件

1. **技术约束**：
   - 必须依赖 LLM API（如 OpenAI、Claude、本地模型等）
   - 需要网络连接调用 API

2. **安全约束**：
   - API Key 需要安全存储
   - 危险命令需要确认

3. **用户体验约束**：
   - 输入响应及时
   - 错误信息友好
